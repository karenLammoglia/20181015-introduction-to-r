language: r
cache: packages

branches:
  except:
    - gh-pages

r_packages:
 - devtools
 - emitanaka/xaringan
 - emitanaka/anicon
 - njtierney/ukpolice
 - hadley/babynames
 - jennybc/gapminder
 - sf
  
script:
 - Rscript -e "rmarkdown::render('index.Rmd')"

notifications:
  email:
    on_success: change
    on_failure: change

deploy:
  provider: pages
  local_dir: /
  github-token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable
  on:
    branch: master